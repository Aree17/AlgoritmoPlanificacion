{% load static %}

<link rel="stylesheet" href="{% static 'css/resultado.css' %}">

<script>
const gantt = {{ gantt_js|safe }};
const cpl = {{ cpl_js|safe }};
const ces = {{ ces_js|safe }};
</script>

<h2>Simulación Paso a Paso</h2>

<div class="step-box">
    <p><b>CPU:</b> <span id="cpu"></span></p>
    <p><b>Inicio:</b> <span id="inicio"></span></p>
    <p><b>Fin:</b> <span id="fin"></span></p>
</div>

<div class="step-box">
    <p><b>CPL:</b> <span id="cpl"></span></p>
</div>

<div class="step-box">
    <p><b>Cola E/S:</b> <span id="ces"></span></p>
</div>

<div style="text-align:center">
    <button onclick="siguiente()">▶ Siguiente paso</button>
    <button onclick="auto()">▶▶ Automático</button>
</div>

<div id="final" class="final-box">

<h2>Gantt CPU</h2>
<table>
<tr><th>Proceso</th><th>Inicio</th><th>Fin</th></tr>
{% for g in gantt %}
<tr>
<td>{{ g.0 }}</td>
<td>{{ g.1 }}</td>
<td>{{ g.2 }}</td>
</tr>
{% endfor %}
</table>

<h2>CPL</h2>
<p>{{ cpl|join:" → " }}</p>

<h2>Cola de Operaciones E/S</h2>
<p>{{ ces|join:" → " }}</p>

<h2>Métricas</h2>
<table>
<tr><th>Proceso</th><th>TEP</th><th>TEjeP</th></tr>
{% for c in completados %}
<tr>
<td>{{ c.proceso }}</td>
<td>{{ c.TEP }}</td>
<td>{{ c.TEjeP }}</td>
</tr>
{% endfor %}
</table>

<h3>Promedios</h3>
<table>
<tr><th>Promedio TEP</th><th>Promedio TEjeP</th></tr>
<tr>
<td>{{ prom_tep|floatformat:2 }}</td>
<td>{{ prom_teje|floatformat:2 }}</td>
</tr>
</table>

</div>

<script src="{% static 'js/resultado.js' %}"></script>
